import{_ as H,r as c,u as J,s as O,o as G,a as U,b as s,c as n,d as D,e as t,w as K,t as d,f as P,F as L,g as Q,k as f,j as p,h,i as z,E as g,l as q,m as W,D as X,n as Y,v as Z,p as ee,q as te}from"./index-8ef98296.js";import{_ as ae}from"./breadcrumb-7f4f9afa.js";import{_ as oe}from"./Nave-fb6ab6aa.js";const b=y=>(ee("data-v-93886475"),y=y(),te(),y),se={class:"banner flex items-center h-[35vh] lg:h-[55vh] relative"},le=b(()=>t("div",{class:"absolute bg-black opacity-40 w-full h-full z-50"},null,-1)),ne=b(()=>t("img",{class:"w-full absolute h-full",src:ae},null,-1)),de={class:"z-50 text-white w-full m-auto w-[80%]"},ie={class:"flex py-12"},ue={class:"text-2xl font-semibold"},ce=b(()=>t("svg",{class:"my-auto mx-[1%] ltr:rotate-180",width:"18",height:"13",viewBox:"0 0 18 13",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[t("path",{d:"M0.999878 6.49976L16.9999 6.49976",stroke:"white","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}),t("path",{d:"M5.99972 11.5C5.99972 11.5 0.999767 7.81756 0.999756 6.49996C0.999744 5.18237 5.99976 1.5 5.99976 1.5",stroke:"white","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),re={class:"text-2xl font-semibold"},_e=b(()=>t("svg",{class:"my-auto mx-[1%] ltr:rotate-180",width:"18",height:"13",viewBox:"0 0 18 13",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[t("path",{d:"M0.999878 6.49976L16.9999 6.49976",stroke:"white","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}),t("path",{d:"M5.99972 11.5C5.99972 11.5 0.999767 7.81756 0.999756 6.49996C0.999744 5.18237 5.99976 1.5 5.99976 1.5",stroke:"white","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),pe={class:"text-2xl font-semibold"},me={class:"bg-white py-[3%]"},ve={class:"m-auto shadow-lg animate__animated animate__backInRight animate__delay-.8s max-w-[1280px] p-[3%]"},he={class:"text-3xl font-bold text-center"},ge=["onSubmit"],fe={key:0},be={class:"flex"},ye={class:"py-2 font-bold text-[#303843]"},xe={key:0,class:"my-auto text-[#AA1E22] px-1"},we={key:1},ke={class:"flex"},qe={class:"py-2 font-bold text-[#303843]"},Ve={key:0,class:"my-auto text-[#AA1E22] px-1"},je={key:2},Ae={class:"flex"},Ie={class:"py-2 font-bold text-[#303843]"},Se={key:0,class:"my-auto text-[#AA1E22] px-1"},Ce={key:3},Ee={class:"flex"},Ue={class:"py-2 font-bold text-[#303843]"},De={key:0,class:"my-auto text-[#AA1E22] px-1"},Le={class:"flex"},ze={class:"py-2 font-bold text-[#303843] text-right"},Ne={key:0,class:"my-auto text-[#AA1E22] px-1"},Be=z("* "),Me={key:0,class:"text-[green] px-2"},Fe=b(()=>t("i",{class:"fas pb-2 fa-upload text-3xl text-[#AA1E22]"},null,-1)),Re=["required","onUpdate:modelValue"],Te=["required"],$e={setup(y){const x=c(""),N=new Date,w=c([]),V=c([]),o=c({}),j=c([]),A=c([]),I=c([]),m=c({}),r=c(!1),S=c(""),k=J(),B=O(),C=()=>{h.post("api/get_job_apply_form_details",{lang:localStorage.getItem("appLang"),form_id:k.currentRoute.value.params.id}).then(a=>{w.value=a.data.result.data.form_fields,a.data.result.data.form_fields.forEach(l=>{const i=l.name;l.field_type;const u=l.selection_values;i=="nationality_id"?m.value.nationality_id=I.value:i=="city_id"?m.value.city_id=j.value:i=="academic_specialization_id"?m.value.academic_specialization_id=A.value:m.value[i]=u})}),console.log(m.value)},M=a=>{const l=a.target.files[0];o.value.cv=a.target.files[0],l&&(S.value=l.name,console.log("Uploaded file:",l),loading.value=!1)},F=()=>{r.value=!0,V.value=[],Object.entries(o.value).forEach(([l,i])=>{const u=w.value.find(v=>v.name==l);u!=null&&u.id&&V.value.push({name:l,value:i,id:u.id})});const a=new FormData;a.append("fields",JSON.stringify(V.value)),a.append("form_id",k.currentRoute.value.params.id),a.append("job_id",k.currentRoute.value.params.job_id),a.append("lang",localStorage.getItem("appLang")),a.append("cv",o.value.cv),h.post("api/job_apply/form_data",a).then(l=>{var i,u,v;((u=(i=l.data)==null?void 0:i.result)==null?void 0:u.message)=="success"?B.add({severity:"success",summary:"شكرا",detail:" لقد تلقينا رسالتك، شكرا لتواصلك معنا",life:3e3}):alert((v=l.data)==null?void 0:v.result)}).catch(l=>{alert(l)})},R=()=>{h.post("api/get_ksa_cities",{lang:localStorage.getItem("appLang")}).then(a=>{j.value=a.data.result.data,console.log(j.value),C(),E()}),h.post("api/get_academic_specializations",{lang:localStorage.getItem("appLang")}).then(a=>{A.value=a.data.result.data,console.log(A.value),C(),E()})},T=()=>{h.post("api/get_countries",{lang:localStorage.getItem("appLang")}).then(a=>{I.value=a.data.result.data,console.log(I.value),C(),E()})},E=()=>{h.post("api/get_posted_job_details",{lang:localStorage.getItem("appLang"),job_id:k.currentRoute.value.params.job_id}).then(a=>{x.value=a.data.result.data})};return G(()=>{T(),R()}),(a,l)=>{const i=U("H1"),u=U("Button"),v=U("Toast");return s(),n(L,null,[D(oe),t("div",se,[le,ne,t("div",de,[D(i,{class:"font-bold text-5xl text-white z-50"},{default:K(()=>[z(d(x.value.name),1)]),_:1}),t("div",ie,[t("p",ue,d(a.$t("home")),1),ce,t("p",re,d(a.$t("jobs")),1),_e,t("p",pe,d(x.value.name),1)])])]),t("div",me,[t("div",ve,[t("p",he,d(a.$t("Apply_for_job"))+" "+d(x.value.name),1),t("form",{onSubmit:P(F,["prevent"]),class:"grid lg:grid-cols-2 gap-4 py-[2%]"},[(s(!0),n(L,null,Q(w.value,(e,$)=>(s(),n("div",{key:$},[e.field_type==="text"?(s(),n("div",fe,[t("div",be,[t("p",ye,d(e.label_on_form),1),e.is_required_field?(s(),n("span",xe,"*")):p("",!0)]),(s(),f(q("InputText"),{required:e.is_required_field,class:g(["bg-[#f7f5f5] w-full",{"p-invalid":r.value&&!o.value[e.name]&&e.is_required_field}]),modelValue:o.value[e.name],"onUpdate:modelValue":_=>o.value[e.name]=_},null,8,["required","modelValue","onUpdate:modelValue","class"]))])):e.field_type==="date"?(s(),n("div",we,[t("div",ke,[t("p",qe,d(e.label_on_form),1),e.is_required_field?(s(),n("span",Ve,"*")):p("",!0)]),(s(),f(q("Calendar"),{showIcon:"",class:g(["bg-[#f7f5f5] w-full",{"p-invalid":r.value&&!o.value[e.name]&&e.is_required_field}]),modelValue:o.value[e.name],"onUpdate:modelValue":_=>o.value[e.name]=_,minDate:W(N)},null,8,["modelValue","onUpdate:modelValue","minDate","class"]))])):e.field_type==="number"?(s(),n("div",je,[t("div",Ae,[t("p",Ie,d(e.label_on_form),1),e.is_required_field?(s(),n("span",Se,"*")):p("",!0)]),(s(),f(q("InputNumber"),{required:e.is_required_field,class:g(["bg-[#f7f5f5] w-full",{"p-invalid":r.value&&!o.value[e.name]&&e.is_required_field}]),modelValue:o.value[e.name],"onUpdate:modelValue":_=>o.value[e.name]=_},null,8,["required","modelValue","onUpdate:modelValue","class"]))])):e.field_type==="selection"?(s(),n("div",Ce,[t("div",Ee,[t("p",Ue,d(e.label_on_form),1),e.is_required_field?(s(),n("span",De,"*")):p("",!0)]),(s(),f(q("Dropdown"),{filter:"","option-value":"id",optionLabel:"name",class:g(["bg-[#f7f5f5] w-full",{"p-invalid":r.value&&!o.value[e.name]&&e.is_required_field}]),options:m.value[e.name],modelValue:o.value[e.name],"onUpdate:modelValue":_=>o.value[e.name]=_},null,8,["options","modelValue","onUpdate:modelValue","class"]))])):e.field_type==="file"?(s(),n("div",{key:4,class:g({"p-invalid":r.value&&!o.value[e.name]})},[t("div",Le,[t("p",ze,d(e.label_on_form),1),e.is_required_field?(s(),n("span",Ne,[Be,S.value?(s(),n("span",Me,"("+d(S.value)+")",1)):p("",!0)])):p("",!0)]),t("label",{style:X(r.value&&!o.value[e.name]?{borderColor:"red"}:{}),for:"cv-upload",class:"upload-container"},[Fe,Y(t("input",{required:e.is_required_field,class:"hidden","onUpdate:modelValue":_=>o.value[e.name]=_},null,8,Re),[[Z,o.value[e.name]]]),t("input",{required:e.is_required_field,id:"cv-upload",type:"file",onChange:M,class:g(["upload-input hidden",{"p-invalid":r.value&&!o.value[e.name]}]),accept:".pdf,.doc,.docx"},null,42,Te)],4)],2)):p("",!0)]))),128)),w.value.length>=1?(s(),f(u,{key:0,onClick:l[0]||(l[0]=e=>r.value=!0),loading:a.loading,style:{"background-color":"#AA1E22 !important"},type:"submit",label:a.$t("apply_now"),class:"w-[50%] my-auto pb-2 lg:mb-0 bg focus:ring-0 text-[#AA1E22]"},null,8,["loading","label"])):p("",!0)],40,ge)])]),D(v)],64)}}},Ge=H($e,[["__scopeId","data-v-93886475"]]);export{Ge as default};
