<template>
  <Nave></Nave>
  <div class="bg-white auction">
  <!-- banner -->
  <div  class="banner flex items-center h-[35vh] lg:h-[55vh] relative ">
    <div class="absolute bg-black opacity-40 w-full h-full z-50"></div>
    <img class="w-full absolute h-full" src="../images/breadcrumb.png">

    <div class="z-50 text-white w-full m-auto w-[80%] ">
      <H1 class="font-bold text-5xl text-white z-50"> {{ $t("الوحدات") }}</H1>
     <div class="flex py-8 ">
      <p class="text-2xl font-semibold ">{{ $t("home") }}</p>
      <svg class="my-auto mx-[1%] ltr:rotate-180" width="18" height="13" viewBox="0 0 18 13" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path d="M0.999878 6.49976L16.9999 6.49976" stroke="white" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
      <path d="M5.99972 11.5C5.99972 11.5 0.999767 7.81756 0.999756 6.49996C0.999744 5.18237 5.99976 1.5 5.99976 1.5" stroke="white" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>

      <p class="text-2xl font-semibold ">{{ $t("الوحدات") }} </p>
     </div>
    </div>
   </div>



   <div class="filter px-[1%] py-[3%] m-auto max-w-[1290px]">
  <!-- Basic Search -->
  <div class="grid lg:grid-cols-4 grid-cols-1 bg-white shadow-lg w-full gap-4 px-[3%] py-[2%] mb-4">
    <div class="py-2 relative">
      <div class="relative">
        <InputText v-model="filter.building_name_like_filter" required class="bg-[#f7f5f5] w-full shadow" :placeholder='$t("البحث عن شقة للإيجار")' />
        <span class="pi pi-search absolute top-[50%] rtl:left-[5%] ltr:right-[5%] transform -translate-y-[50%] z-50"></span>
      </div>
    </div>
    <div class="py-1 relative my-auto">
      <div class="relative">
        <Dropdown  @update:model-value="get_neighborhoods($event)"   style="height: 100% !important;" filter v-model="filter.city_id_filter" option-value="id" :options="cityes" optionLabel="name" :placeholder='$t("select_city")' class="shadow w-full bg-[#f7f5f5] [&>div>div>span]:bg-black md:w-14rem my-[1%]" />
      </div>
    </div>
    <div class="py-1 relative my-auto">
      <div class="relative">
        <Dropdown style="height: 100% !important;" :loading="!filter.city_id_filter"  filter v-model="filter.neighborhood_id_filter" option-value="id" :options="neighborhoods" optionLabel="name" :placeholder='$t("اختر اسم الحي")' class="shadow w-full bg-[#f7f5f5] [&>div>div>span]:bg-black md:w-14rem my-[1%]" />
      </div>
    </div>
    <div class="flex items-center text-center">
      <Button @click="fetchdata" style="background-color:#AA1E22;" :label='$t("search")' class="mt-3 bg-[#AA1E22] w-[50%] m-auto"/>
    </div>
  </div>

  <!-- Advanced Search (Collapsible) -->
 <AdvancedSearch
      :activityTypes="activity"
      :initialFilters="filter"
      @search="handleAdvancedSearch"
    />
</div>
   <!-- auctions -->
  <div class=  "  px-[1%] py-[2%] m-auto  max-w-[1290px]">
      <div class="flex justify-between">
        <h2 class="text-4xl  font-bold">{{ $t("الوحدات") }}</h2>

      </div>



     <div class="grid  grid-cols-1 lg:grid-cols-3 gap-3 pt-4">
      <div v-if="allauctions" v-for="(auction, index) in allauctions" :key="index"  class="text-center relative text-4xl bg-white rounded-lg w-full shadow-md ">
          <!-- <div class="absolute w-full h-full bg-white opacity-20"></div> -->
          <div class="">
             <div class="relative" >

              <img alt="not found" class="h-[230px] w-full" :src="auction?.profile_img_link">
              <p  :class="{'bg-[#CE3C3CB8]': auction?.status == 'rented','bg-[#4ef6248f] ': auction?.status == 'available'}" class="absolute z-50 top-[70%] left-3   text-white text-base p-2 rounded-lg">{{ auction?.status }}</p>
             </div>
              <div class="flex justify-between p-2">
                <div>
                  <p class="text-xl font-bold text-right">{{ auction?.name }}</p>
                  <div class="flex py-1 ">
                    <a :href="auction?.location_url" target="_blank" class="flex bg-[#C65555]  py-1 px-1 mx-1 rounded-md" style="border: 2px solid #C65555;">
                    <div class="my-auto">
                      <svg class="my-auto" width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <circle cx="9" cy="8.25" r="2.25" stroke="#ffff" stroke-width="1.5"/>
                      <path d="M15.75 8.16667C15.75 11.8486 11.5312 16.5 9 16.5C6.46875 16.5 2.25 11.8486 2.25 8.16667C2.25 4.48477 5.27208 1.5 9 1.5C12.7279 1.5 15.75 4.48477 15.75 8.16667Z" stroke="#ffff" stroke-width="1.5"/>
                      </svg>


                    </div>
                    <p class="text-white text-base px-1">{{ auction?.area }} </p>
                   </a>
                   <a class="flex bg-[#C65555] py-1 px-2 rounded-md " style="border: 2px solid #C65555;">
                    <div class="m-auto">
                      <svg width="14" height="16" viewBox="0 0 14 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <path fill-rule="evenodd" clip-rule="evenodd" d="M0.836914 4.96201C0.836914 3.1912 2.27243 1.75569 4.04323 1.75569H10.7934C12.5642 1.75569 13.9997 3.1912 13.9997 4.96201V12.0497C13.9997 13.8205 12.5642 15.256 10.7934 15.256H4.04323C2.27243 15.256 0.836914 13.8205 0.836914 12.0497V4.96201ZM4.04323 2.76821C2.83163 2.76821 1.84944 3.75041 1.84944 4.96201V12.0497C1.84944 13.2613 2.83163 14.2435 4.04323 14.2435H10.7934C12.005 14.2435 12.9872 13.2613 12.9872 12.0497V4.96201C12.9872 3.75041 12.005 2.76821 10.7934 2.76821H4.04323Z" fill="#ffff"/>
                      <path fill-rule="evenodd" clip-rule="evenodd" d="M0.836914 5.97453C0.836914 5.69493 1.06357 5.46827 1.34318 5.46827H13.4934C13.773 5.46827 13.9997 5.69493 13.9997 5.97453C13.9997 6.25413 13.773 6.48079 13.4934 6.48079H1.34318C1.06357 6.48079 0.836914 6.25413 0.836914 5.97453Z" fill="#ffff"/>
                      <path fill-rule="evenodd" clip-rule="evenodd" d="M4.71825 0.743164C4.99785 0.743164 5.22451 0.969825 5.22451 1.24943V3.27447C5.22451 3.55407 4.99785 3.78073 4.71825 3.78073C4.43865 3.78073 4.21199 3.55407 4.21199 3.27447V1.24943C4.21199 0.969825 4.43865 0.743164 4.71825 0.743164Z" fill="#ffff"/>
                      <path fill-rule="evenodd" clip-rule="evenodd" d="M10.1184 0.743164C10.398 0.743164 10.6246 0.969825 10.6246 1.24943V3.27447C10.6246 3.55407 10.398 3.78073 10.1184 3.78073C9.83877 3.78073 9.61211 3.55407 9.61211 3.27447V1.24943C9.61211 0.969825 9.83877 0.743164 10.1184 0.743164Z" fill="#ffff"/>
                      <path d="M8.09332 10.0246C8.09332 10.3974 7.79111 10.6996 7.41831 10.6996C7.04551 10.6996 6.74329 10.3974 6.74329 10.0246C6.74329 9.65182 7.04551 9.3496 7.41831 9.3496C7.79111 9.3496 8.09332 9.65182 8.09332 10.0246Z" fill="#ffff"/>
                      <path d="M10.7934 10.0246C10.7934 10.3974 10.4912 10.6996 10.1184 10.6996C9.74557 10.6996 9.44335 10.3974 9.44335 10.0246C9.44335 9.65182 9.74557 9.3496 10.1184 9.3496C10.4912 9.3496 10.7934 9.65182 10.7934 10.0246Z" fill="#ffff"/>
                      <path d="M5.39326 10.0246C5.39326 10.3974 5.09105 10.6996 4.71825 10.6996C4.34545 10.6996 4.04323 10.3974 4.04323 10.0246C4.04323 9.65182 4.34545 9.3496 4.71825 9.3496C5.09105 9.3496 5.39326 9.65182 5.39326 10.0246Z" fill="#ffff"/>
                      </svg>
                    </div>
                    <p class="text-white text-sm px-1"> {{ auction?.deed_date }}</p>
                   </a>
                  </div>
                </div>

              </div>
             <div>

             </div>
          </div>

          <div class="grid grid-cols-4 p-[1%] gap-1">

            <div class="border-2 p-2 rounded-md">
               <p><svg width="24" class="mx-auto" height="22" viewBox="0 0 24 22" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M23.1406 0.60586C23.4955 0.941015 23.8055 1.27188 23.8369 1.34062C23.9133 1.5168 23.8459 1.68008 23.6617 1.77031C23.4551 1.86484 23.3248 1.81758 23.0238 1.52539C22.8891 1.39648 22.7633 1.28906 22.7453 1.28906C22.7273 1.28906 22.7094 5.0918 22.7094 9.74102V18.1887L23.0193 17.9051C23.2799 17.6645 23.3562 17.6172 23.482 17.6172C23.6482 17.6215 23.7471 17.6773 23.8234 17.8191C23.9402 18.0211 23.8953 18.0898 23.1945 18.7645C22.5656 19.366 22.4982 19.4219 22.35 19.4219C22.2646 19.4219 22.1703 19.4047 22.1478 19.3875C22.1209 19.3703 21.8154 19.0738 21.4605 18.7301C20.9125 18.1887 20.8226 18.0812 20.8226 17.9652C20.8226 17.7762 20.9933 17.6172 21.2 17.6172C21.3303 17.6172 21.4066 17.6602 21.6537 17.8793L21.9457 18.1414V9.70664V1.27188L21.6851 1.5125C21.3078 1.87344 21.0787 1.91641 20.8945 1.66719C20.7283 1.43945 20.7732 1.36211 21.5099 0.657421C22.1254 0.0687504 22.2107 0 22.35 0C22.4848 0 22.5701 0.0644531 23.1406 0.60586Z" fill="#AA1E22"/>
                <path d="M19.9108 0.103004L20.0366 0.206129L20.0501 9.08347C20.0591 18.9491 20.086 18.2143 19.7581 18.3046C19.6368 18.3389 17.0089 18.3475 10.3425 18.3389L1.09307 18.3261L0.98526 18.2057L0.877447 18.0854V9.19519C0.877447 2.77136 0.890924 0.274879 0.926861 0.201832C0.953815 0.141676 1.02569 0.0729256 1.08858 0.0471439C1.16495 0.0127697 3.77491 -0.000120163 10.4907 -0.000120163H19.7851L19.9108 0.103004ZM13.1411 1.82605V2.92175H13.3388C13.5769 2.92175 13.761 2.98191 13.8419 3.08503C13.9407 3.20535 13.9183 3.42878 13.7925 3.5448C13.6847 3.65222 13.6802 3.65222 12.7593 3.65222C11.8384 3.65222 11.8339 3.65222 11.7261 3.5448C11.5823 3.4116 11.5823 3.22253 11.7171 3.06785C11.8069 2.96902 11.8698 2.94753 12.0989 2.93035L12.3774 2.91316V1.82175V0.730349H10.648H8.91846V2.82293C8.91846 4.91121 8.91846 4.9155 8.81963 5.01433C8.7253 5.10886 8.70284 5.11316 7.87628 5.11316H7.03174V5.27214C7.03174 5.51277 6.95088 5.7491 6.85206 5.80066C6.80713 5.82214 6.70381 5.84363 6.62745 5.84363C6.28155 5.84363 6.22315 5.69324 6.22315 4.76941C6.22315 3.9573 6.25909 3.79832 6.47471 3.71238C6.60499 3.66082 6.64991 3.66082 6.78018 3.71238C6.94639 3.77683 7.03174 3.9573 7.03174 4.24089V4.38269H7.59327H8.15479V2.55652V0.730349H4.89795H1.64112V2.55652V4.38269H2.4003H3.15948L3.17745 4.12488C3.2044 3.75535 3.40655 3.59207 3.70303 3.69949C3.91866 3.78113 3.92764 3.82839 3.93213 4.76511C3.93213 5.6116 3.92764 5.65027 3.83331 5.7448C3.71202 5.86941 3.44698 5.878 3.29874 5.76199C3.21338 5.69753 3.19092 5.63308 3.17745 5.39675L3.15948 5.11316L2.40928 5.12175L1.66358 5.13464L1.6501 8.06511L1.64112 10.9999H2.78214H3.92315L3.94112 10.7335C3.95909 10.5143 3.98155 10.4542 4.08487 10.3682C4.24659 10.2393 4.44424 10.2393 4.5835 10.3768C4.69581 10.48 4.69581 10.4843 4.69581 11.3651C4.69581 12.246 4.69581 12.2503 4.5835 12.3534C4.46221 12.4737 4.22862 12.4952 4.10284 12.4007C3.99503 12.3233 3.93213 12.1471 3.93213 11.9194V11.7303H2.78663H1.64112V14.6737V17.6171L5.8503 17.6085L10.064 17.5956L10.0774 14.6651L10.0864 11.7303H8.94542H7.80889L7.78194 11.9968C7.75948 12.2159 7.73702 12.2846 7.63819 12.362C7.48995 12.4866 7.30577 12.4866 7.14854 12.3706L7.03174 12.2846V11.3651V10.4456L7.14854 10.3596C7.30577 10.2436 7.48995 10.2436 7.63819 10.3682C7.73702 10.4456 7.75948 10.5143 7.78194 10.7335L7.80889 10.9999H9.17002C10.612 10.9999 10.7108 11.0128 10.8007 11.2018C10.8366 11.2749 10.8501 12.2374 10.8501 14.4632V17.6171L15.0593 17.6085L19.273 17.5956V17.2303V16.8694L19.1157 16.8393C19.0304 16.8264 18.8148 16.7878 18.644 16.7577C17.229 16.5085 15.8814 15.5202 15.212 14.2354C14.8931 13.6167 14.7134 12.955 14.6999 12.3018C14.6909 11.9538 14.6954 11.9366 14.8167 11.8335L14.9425 11.7303H17.1212H19.2954V10.6346V9.53894H15.9937C13.6712 9.53894 12.6649 9.52605 12.5886 9.49168C12.3909 9.40574 12.3774 9.31121 12.3774 7.93191V6.62996L12.0989 6.60418C11.8698 6.58269 11.798 6.56121 11.7171 6.46667C11.5868 6.32488 11.5868 6.14871 11.7081 5.99832L11.798 5.8866H12.7593H13.7206L13.8105 5.99832C13.9317 6.14871 13.9317 6.32488 13.8015 6.46667C13.7206 6.56121 13.6487 6.58269 13.4196 6.60418L13.1411 6.62996V7.71707V8.80847L16.2048 8.79988L19.273 8.78699L19.2864 4.75652L19.2954 0.730349H16.2183H13.1411V1.82605ZM15.4636 12.6413C15.4995 12.8991 15.6792 13.4792 15.8095 13.7671C16.3306 14.8971 17.4896 15.7909 18.7698 16.053C18.9405 16.0831 19.1247 16.1132 19.1876 16.1132H19.2954V14.287V12.4608H17.3683H15.4411L15.4636 12.6413Z" fill="#AA1E22"/>
                <path d="M20.4584 19.6883C20.8178 20.0277 21.1277 20.3199 21.1457 20.3457C21.1637 20.3672 21.1816 20.4574 21.1816 20.5391C21.1816 20.6809 21.1232 20.7453 20.4943 21.3469C19.9104 21.9012 19.7846 22 19.6678 22C19.4746 22 19.2949 21.8195 19.2949 21.6262C19.2949 21.5016 19.3443 21.4285 19.5959 21.1793L19.8924 20.8828H11.0607C6.2002 20.8828 2.22461 20.9 2.22461 20.9172C2.22461 20.9344 2.33691 21.0547 2.47168 21.1836C2.76367 21.4586 2.82207 21.5875 2.74121 21.7723C2.67383 21.927 2.55254 22 2.37734 22C2.27852 22 2.1168 21.8668 1.56426 21.3426C0.944336 20.7496 0.876953 20.6766 0.876953 20.5391C0.876953 20.4059 0.944336 20.3285 1.56426 19.7355C2.30098 19.0309 2.38184 18.9879 2.61992 19.1469C2.88047 19.323 2.83555 19.5422 2.4582 19.9031L2.20664 20.1523H11.0248H19.843L19.5689 19.873C19.3398 19.6367 19.2949 19.5637 19.2949 19.4391C19.2949 19.2414 19.4611 19.0781 19.6588 19.0781C19.7801 19.0781 19.8924 19.1641 20.4584 19.6883Z" fill="#AA1E22"/>
                </svg>
                </p>
                <p class="text-sm text-[#303843] pt-2">{{ auction?.total_area }}</p>
            </div>
            <div class="border-2 p-2 rounded-md">
               <p><svg width="30" class="mx-auto" height="22" viewBox="0 0 30 22" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M28.0017 10.6739V2.42243H25.5958V3.77551H24.3908C21.8933 1.34194 18.6091 0.0026318 15.1224 0C15.1189 0 15.1156 0 15.1122 0C11.6287 0 8.34935 1.33499 5.85766 3.76325L4.69401 3.77227V2.42238H2.28809V10.6646C1.43158 10.859 0.790039 11.626 0.790039 12.5405V16.9696V20.5889H1.73934V22H4.80157V20.5889H25.4482V22H28.5105V20.5889H29.4598V16.9696V12.5405C29.4599 11.6403 28.8383 10.8827 28.0017 10.6739ZM26.4474 3.27407H27.1501V10.6166H26.4474V3.27407ZM4.71097 4.62396L6.21155 4.61226L6.33485 4.48896C11.1779 -0.354117 19.0643 -0.34807 23.9149 4.50251L24.0396 4.62721H25.5789V10.6166H23.9479V8.61343H16.4504V10.6166H13.7995V8.61343H6.30193V10.6166H4.71097V4.62396ZM23.0964 9.46507V10.6166H17.3021V9.46507H23.0964ZM12.9478 9.46507V10.6166H7.15351V9.46507H12.9478ZM3.13968 3.27407H3.84237V10.6166H3.13968V3.27407ZM3.94999 21.1484H2.59097V20.5889H3.94999V21.1484ZM27.6589 21.1484H26.2999V20.5889H27.6589V21.1484ZM28.6082 19.7373H28.5105H25.4482H4.80157H1.73934H1.64162V17.8213H28.6082V19.7373ZM28.6082 16.9696H1.64168V12.5405C1.64168 11.9492 2.12268 11.4682 2.71394 11.4682H3.85939H4.69406H6.30198H13.7995H16.4505H23.948H25.5959H26.4306H27.5361C28.1273 11.4682 28.6083 11.9492 28.6083 12.5405V16.9696H28.6082Z" fill="#AA1E22"/>
                  </svg>

                </p>
                <p class="text-sm text-[#303843] pt-2">{{ auction?.bedrooms_number }}</p>
            </div>
            <div class="border-2 p-2 rounded-md">
               <p><svg width="18" class="mx-auto" height="24" viewBox="0 0 18 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M13.7661 0.75H7.89653C6.98877 0.751036 6.11848 1.1121 5.4766 1.75398C4.83472 2.39587 4.47365 3.26615 4.47261 4.17391V5.8981C3.69447 6.17429 3.00953 6.66344 2.49577 7.30985C1.98202 7.95626 1.6601 8.73395 1.56669 9.55435H1.53783C1.27838 9.55435 1.02956 9.65742 0.846096 9.84087C0.662637 10.0243 0.55957 10.2732 0.55957 10.5326V11.0217C0.55957 11.2812 0.662637 11.53 0.846096 11.7135C1.02956 11.8969 1.27838 12 1.53783 12H10.3422C10.6016 12 10.8505 11.8969 11.0339 11.7135C11.2174 11.53 11.3204 11.2812 11.3204 11.0217V10.5326C11.3204 10.2732 11.2174 10.0243 11.0339 9.84087C10.8505 9.65742 10.6016 9.55435 10.3422 9.55435H10.3133C10.2199 8.73395 9.89799 7.95626 9.38424 7.30985C8.87049 6.66344 8.18554 6.17429 7.4074 5.8981V4.17391C7.4074 4.04419 7.45893 3.91978 7.55066 3.82805C7.64239 3.73632 7.7668 3.68478 7.89653 3.68478H13.7661C13.8958 3.68478 14.0202 3.73632 14.112 3.82805C14.2037 3.91978 14.2552 4.04419 14.2552 4.17391V21.7826C14.2552 22.1718 14.4098 22.545 14.685 22.8202C14.9602 23.0954 15.3334 23.25 15.7226 23.25C16.1118 23.25 16.485 23.0954 16.7602 22.8202C17.0354 22.545 17.19 22.1718 17.19 21.7826V4.17391C17.189 3.26615 16.8279 2.39587 16.186 1.75398C15.5441 1.1121 14.6739 0.751036 13.7661 0.75ZM10.3422 11.0217H1.53783V10.5326H10.3422V11.0217ZM9.32479 9.55435H2.55522C2.67217 8.74001 3.07879 7.99514 3.7005 7.45634C4.3222 6.91754 5.11732 6.62095 5.94001 6.62095C6.7627 6.62095 7.55781 6.91754 8.17952 7.45634C8.80122 7.99514 9.20784 8.74001 9.32479 9.55435ZM16.2117 21.7826C16.2117 21.9123 16.1602 22.0367 16.0685 22.1285C15.9768 22.2202 15.8523 22.2717 15.7226 22.2717C15.5929 22.2717 15.4685 22.2202 15.3767 22.1285C15.285 22.0367 15.2335 21.9123 15.2335 21.7826V4.17391C15.2335 3.78474 15.0789 3.4115 14.8037 3.13631C14.5285 2.86112 14.1553 2.70652 13.7661 2.70652H7.89653C7.50735 2.70652 7.13411 2.86112 6.85893 3.13631C6.58374 3.4115 6.42914 3.78474 6.42914 4.17391V5.67016C6.10419 5.63167 5.77583 5.63167 5.45088 5.67016V4.17391C5.45165 3.52552 5.70957 2.90391 6.16805 2.44543C6.62653 1.98695 7.24814 1.72904 7.89653 1.72826H13.7661C14.4145 1.72904 15.0361 1.98695 15.4946 2.44543C15.9531 2.90391 16.211 3.52552 16.2117 4.17391V21.7826Z" fill="#AA1E22"/>
                  <path d="M5.9403 12.9783C5.81058 12.9783 5.68616 13.0298 5.59443 13.1215C5.5027 13.2133 5.45117 13.3377 5.45117 13.4674V13.9565C5.45117 14.0863 5.5027 14.2107 5.59443 14.3024C5.68616 14.3941 5.81058 14.4457 5.9403 14.4457C6.07003 14.4457 6.19444 14.3941 6.28617 14.3024C6.3779 14.2107 6.42943 14.0863 6.42943 13.9565V13.4674C6.42943 13.3377 6.3779 13.2133 6.28617 13.1215C6.19444 13.0298 6.07003 12.9783 5.9403 12.9783Z" fill="#AA1E22"/>
                  <path d="M5.9403 15.3008C5.81058 15.3008 5.68616 15.3523 5.59443 15.444C5.5027 15.5358 5.45117 15.6602 5.45117 15.7899V16.707C5.45117 16.8368 5.5027 16.9612 5.59443 17.0529C5.68616 17.1446 5.81058 17.1962 5.9403 17.1962C6.07003 17.1962 6.19444 17.1446 6.28617 17.0529C6.3779 16.9612 6.42943 16.8368 6.42943 16.707V15.7899C6.42943 15.6602 6.3779 15.5358 6.28617 15.444C6.19444 15.3523 6.07003 15.3008 5.9403 15.3008Z" fill="#AA1E22"/>
                  <path d="M5.9403 18.053C5.81058 18.053 5.68616 18.1045 5.59443 18.1962C5.5027 18.288 5.45117 18.4124 5.45117 18.5421V19.4592C5.45117 19.589 5.5027 19.7134 5.59443 19.8051C5.68616 19.8968 5.81058 19.9484 5.9403 19.9484C6.07003 19.9484 6.19444 19.8968 6.28617 19.8051C6.3779 19.7134 6.42943 19.589 6.42943 19.4592V18.5421C6.42943 18.4124 6.3779 18.288 6.28617 18.1962C6.19444 18.1045 6.07003 18.053 5.9403 18.053Z" fill="#AA1E22"/>
                  <path d="M5.9403 20.8047C5.81058 20.8047 5.68616 20.8562 5.59443 20.948C5.5027 21.0397 5.45117 21.1641 5.45117 21.2938V21.7829C5.45117 21.9127 5.5027 22.0371 5.59443 22.1288C5.68616 22.2205 5.81058 22.2721 5.9403 22.2721C6.07003 22.2721 6.19444 22.2205 6.28617 22.1288C6.3779 22.0371 6.42943 21.9127 6.42943 21.7829V21.2938C6.42943 21.1641 6.3779 21.0397 6.28617 20.948C6.19444 20.8562 6.07003 20.8047 5.9403 20.8047Z" fill="#AA1E22"/>
                  <path d="M8.98897 14.4385C9.0528 14.431 9.11452 14.4111 9.17063 14.3797C9.22673 14.3484 9.27611 14.3063 9.31595 14.2559C9.35579 14.2055 9.3853 14.1477 9.4028 14.0859C9.4203 14.0241 9.42544 13.9594 9.41794 13.8956L9.36071 13.4104C9.35439 13.3456 9.33523 13.2828 9.30434 13.2256C9.27345 13.1683 9.23146 13.1178 9.18083 13.077C9.13019 13.0362 9.07192 13.0059 9.00944 12.9879C8.94695 12.9699 8.88149 12.9645 8.8169 12.9721C8.75231 12.9797 8.68988 13 8.63326 13.032C8.57664 13.064 8.52697 13.107 8.48715 13.1584C8.44734 13.2098 8.41817 13.2687 8.40137 13.3315C8.38457 13.3943 8.38047 13.4599 8.3893 13.5243L8.44653 14.01C8.46052 14.1288 8.51758 14.2384 8.6069 14.318C8.69623 14.3976 8.81162 14.4417 8.93126 14.4419C8.95055 14.442 8.96983 14.4409 8.98897 14.4385Z" fill="#AA1E22"/>
                  <path d="M9.31455 17.1919C9.44336 17.1767 9.56086 17.111 9.64121 17.0092C9.72156 16.9074 9.75819 16.7778 9.74303 16.649L9.63542 15.7309C9.62024 15.602 9.55449 15.4845 9.45262 15.4041C9.35075 15.3237 9.22112 15.287 9.09224 15.3022C8.96336 15.3174 8.84578 15.3831 8.76538 15.485C8.68498 15.5869 8.64834 15.7165 8.66352 15.8454L8.77161 16.7635C8.78562 16.8824 8.84275 16.992 8.93217 17.0716C9.0216 17.1512 9.13711 17.1952 9.25683 17.1954C9.27612 17.1954 9.2954 17.1943 9.31455 17.1919Z" fill="#AA1E22"/>
                  <path d="M9.6378 19.9457C9.76662 19.9305 9.88412 19.8648 9.96447 19.763C10.0448 19.6612 10.0814 19.5316 10.0663 19.4028L9.95819 18.4847C9.95164 18.4201 9.9323 18.3575 9.90131 18.3005C9.87032 18.2435 9.82829 18.1932 9.77767 18.1526C9.72705 18.1119 9.66885 18.0818 9.60647 18.0639C9.54409 18.046 9.47877 18.0407 9.41432 18.0483C9.34986 18.0559 9.28756 18.0762 9.23105 18.1081C9.17454 18.14 9.12494 18.1829 9.08515 18.2342C9.04536 18.2854 9.01617 18.3441 8.99928 18.4068C8.98239 18.4694 8.97814 18.5348 8.98677 18.5991L9.09487 19.5172C9.10887 19.6361 9.16592 19.7456 9.25525 19.8252C9.34457 19.9048 9.45996 19.9489 9.5796 19.9491C9.59905 19.9492 9.61849 19.9481 9.6378 19.9457Z" fill="#AA1E22"/>
                  <path d="M9.73895 20.8119C9.67513 20.8194 9.6134 20.8394 9.5573 20.8707C9.50119 20.902 9.45181 20.9441 9.41198 20.9945C9.37214 21.045 9.34263 21.1027 9.32513 21.1646C9.30763 21.2264 9.30248 21.2911 9.30999 21.3549L9.36722 21.8401C9.38112 21.9592 9.43827 22.069 9.52781 22.1487C9.61735 22.2284 9.73304 22.2725 9.85292 22.2725C9.87221 22.2726 9.89149 22.2714 9.91064 22.2691C10.0394 22.2539 10.157 22.1881 10.2373 22.0863C10.3177 21.9845 10.3543 21.8549 10.3391 21.7261L10.2819 21.2404C10.2667 21.1116 10.201 20.9941 10.0991 20.9138C9.99733 20.8334 9.86777 20.7968 9.73895 20.8119Z" fill="#AA1E22"/>
                  <path d="M3.06249 12.9816C2.99867 12.9741 2.934 12.9793 2.87217 12.9968C2.81034 13.0143 2.75257 13.0438 2.70215 13.0836C2.65172 13.1234 2.60965 13.1728 2.57832 13.2289C2.54699 13.285 2.52702 13.3468 2.51956 13.4106L2.46233 13.8958C2.45483 13.9596 2.45997 14.0243 2.47747 14.0861C2.49497 14.148 2.52448 14.2057 2.56432 14.2562C2.60416 14.3066 2.65354 14.3486 2.70964 14.38C2.76575 14.4113 2.82747 14.4313 2.8913 14.4387C2.91045 14.4411 2.92972 14.4422 2.94902 14.4422C3.06865 14.4419 3.18404 14.3978 3.27337 14.3182C3.36269 14.2386 3.41975 14.1291 3.43374 14.0103L3.49097 13.5246C3.50613 13.3957 3.46951 13.2662 3.38916 13.1644C3.30881 13.0625 3.1913 12.9968 3.06249 12.9816Z" fill="#AA1E22"/>
                  <path d="M2.46689 18.058C2.33807 18.0429 2.20851 18.0795 2.1067 18.1599C2.00488 18.2402 1.93915 18.3577 1.92395 18.4865L1.81585 19.4046C1.80069 19.5334 1.83732 19.663 1.91767 19.7648C1.99802 19.8666 2.11552 19.9324 2.24433 19.9476C2.26365 19.9499 2.28309 19.951 2.30254 19.951C2.42218 19.9507 2.53757 19.9066 2.62689 19.827C2.71621 19.7475 2.77327 19.6379 2.78727 19.5191L2.89537 18.601C2.91053 18.4722 2.8739 18.3426 2.79355 18.2408C2.7132 18.139 2.5957 18.0732 2.46689 18.058Z" fill="#AA1E22"/>
                  <path d="M2.78866 15.3041C2.65985 15.289 2.53029 15.3256 2.42847 15.406C2.32666 15.4863 2.26092 15.6038 2.24573 15.7326L2.13812 16.6507C2.12296 16.7795 2.15958 16.9091 2.23993 17.0109C2.32029 17.1127 2.43779 17.1785 2.5666 17.1936C2.58575 17.196 2.60502 17.1971 2.62432 17.1971C2.74404 17.1969 2.85955 17.1529 2.94897 17.0733C3.0384 16.9937 3.09553 16.8841 3.10953 16.7652L3.21763 15.8471C3.22514 15.7833 3.21999 15.7186 3.20249 15.6567C3.18499 15.5949 3.15548 15.5371 3.11564 15.4867C3.07581 15.4363 3.02642 15.3942 2.97032 15.3629C2.91422 15.3316 2.85249 15.3116 2.78866 15.3041Z" fill="#AA1E22"/>
                  <path d="M2.14111 20.8119C2.01238 20.7969 1.88294 20.8336 1.78124 20.9139C1.67953 20.9942 1.61387 21.1117 1.59867 21.2404L1.54144 21.7261C1.52628 21.8549 1.5629 21.9845 1.64325 22.0863C1.72361 22.1881 1.84111 22.2538 1.96992 22.269C1.98891 22.2713 2.00802 22.2725 2.02715 22.2724C2.14694 22.2723 2.26252 22.2282 2.35195 22.1485C2.44139 22.0688 2.49847 21.959 2.51236 21.84L2.56959 21.3548C2.58475 21.226 2.54813 21.0965 2.46778 20.9946C2.38743 20.8928 2.26992 20.8271 2.14111 20.8119Z" fill="#AA1E22"/>
                  </svg>

                </p>
                <p class="text-sm text-[#303843] pt-2">{{  auction?.bathrooms_number }}</p>
            </div>
            <div class="border-2 p-2 rounded-md">
               <p><svg width="35" class="mx-auto" height="22" viewBox="0 0 35 22" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M34.1252 16.0366C33.9806 16.0366 33.8633 16.154 33.8633 16.2985C33.8633 18.1426 32.3628 19.6428 30.5188 19.6428H4.73135C2.88728 19.6428 1.38709 18.1426 1.38709 16.2985C1.38709 16.154 1.26976 16.0366 1.12519 16.0366C0.980615 16.0366 0.863281 16.154 0.863281 16.2985C0.863281 18.4315 2.5984 20.1666 4.73135 20.1666H30.5188C32.652 20.1666 34.3871 18.4315 34.3871 16.2985C34.3871 16.154 34.2698 16.0366 34.1252 16.0366Z" fill="#AA1E22"/>
                    <path d="M27.6338 0H7.6164C5.48109 0 3.74414 1.73512 3.74414 3.86833V7.33333C3.74414 7.47791 3.86147 7.59524 4.00605 7.59524C4.15062 7.59524 4.26795 7.47791 4.26795 7.33333V3.86833C4.26795 2.02426 5.76997 0.52381 7.6164 0.52381H27.6338C29.4802 0.52381 30.9822 2.02426 30.9822 3.86833V7.33333C30.9822 7.47791 31.0996 7.59524 31.2441 7.59524C31.3887 7.59524 31.506 7.47791 31.506 7.33333V3.86833C31.506 1.73512 29.7688 0 27.6338 0Z" fill="#AA1E22"/>
                    <path d="M4.73135 7.33325H3.28904C1.9515 7.33325 0.863281 8.42147 0.863281 9.75901V16.238C0.863281 16.3826 0.980615 16.4999 1.12519 16.4999C1.26976 16.4999 1.38709 16.3826 1.38709 16.238V9.75901C1.38709 8.71035 2.24038 7.85706 3.28904 7.85706H4.73135C5.77557 7.85706 6.62519 8.71035 6.62519 9.75901V14.9285C6.62519 15.0731 6.74252 15.1904 6.88709 15.1904C7.03166 15.1904 7.149 15.0731 7.149 14.9285V9.75901C7.149 8.42147 6.06445 7.33325 4.73135 7.33325Z" fill="#AA1E22"/>
                    <path d="M31.9615 7.33325H30.5189C29.1861 7.33325 28.1016 8.42147 28.1016 9.75901V14.9285C28.1016 15.0731 28.2189 15.1904 28.3635 15.1904C28.508 15.1904 28.6254 15.0731 28.6254 14.9285V9.75901C28.6254 8.71035 29.4747 7.85706 30.5189 7.85706H31.9615C33.0102 7.85706 33.8635 8.71035 33.8635 9.75901V16.238C33.8635 16.3826 33.9808 16.4999 34.1254 16.4999C34.2699 16.4999 34.3873 16.3826 34.3873 16.238V9.75901C34.3873 8.42147 33.2991 7.33325 31.9615 7.33325Z" fill="#AA1E22"/>
                    <path d="M28.3631 13.3572H6.8869C6.74233 13.3572 6.625 13.4745 6.625 13.6191C6.625 13.7637 6.74233 13.881 6.8869 13.881H28.3631C28.5077 13.881 28.625 13.7637 28.625 13.6191C28.625 13.4745 28.5077 13.3572 28.3631 13.3572Z" fill="#AA1E22"/>
                    <path d="M6.88723 19.6428C6.74266 19.6428 6.62533 19.7602 6.62533 19.9047V21.4762H5.3158V19.9047C5.3158 19.7602 5.19847 19.6428 5.0539 19.6428C4.90933 19.6428 4.79199 19.7602 4.79199 19.9047V21.7381C4.79199 21.8826 4.90933 22 5.0539 22H6.88723C7.0318 22 7.14914 21.8826 7.14914 21.7381V19.9047C7.14914 19.7602 7.0318 19.6428 6.88723 19.6428Z" fill="#AA1E22"/>
                    <path d="M30.1968 19.6428C30.0522 19.6428 29.9349 19.7602 29.9349 19.9047V21.4762H28.6254V19.9047C28.6254 19.7602 28.508 19.6428 28.3635 19.6428C28.2189 19.6428 28.1016 19.7602 28.1016 19.9047V21.7381C28.1016 21.8826 28.2189 22 28.3635 22H30.1968C30.3414 22 30.4587 21.8826 30.4587 21.7381V19.9047C30.4587 19.7602 30.3414 19.6428 30.1968 19.6428Z" fill="#AA1E22"/>
                    <path d="M21.5536 16.762H8.33733C7.68205 16.762 7.14881 16.2324 7.14881 15.5816V14.9287C7.14881 14.7841 7.03148 14.6667 6.8869 14.6667C6.74233 14.6667 6.625 14.7841 6.625 14.9287V15.5816C6.625 16.5213 7.39317 17.2858 8.33733 17.2858H21.5536C21.6981 17.2858 21.8155 17.1685 21.8155 17.0239C21.8155 16.8793 21.6981 16.762 21.5536 16.762Z" fill="#AA1E22"/>
                    <path d="M28.3631 14.6667C28.2186 14.6667 28.1012 14.7841 28.1012 14.9287V15.5816C28.1012 16.2324 27.568 16.762 26.9127 16.762H24.6965C24.5519 16.762 24.4346 16.8793 24.4346 17.0239C24.4346 17.1685 24.5519 17.2858 24.6965 17.2858H26.9127C27.8569 17.2858 28.625 16.5213 28.625 15.5816V14.9287C28.625 14.7841 28.5077 14.6667 28.3631 14.6667Z" fill="#AA1E22"/>
                    <path d="M25.2201 1.30957H23.6486C23.5041 1.30957 23.3867 1.4269 23.3867 1.57148C23.3867 1.71605 23.5041 1.83338 23.6486 1.83338H25.2201C25.3646 1.83338 25.482 1.71605 25.482 1.57148C25.482 1.4269 25.3646 1.30957 25.2201 1.30957Z" fill="#AA1E22"/>
                    <path d="M29.5587 2.18459C29.0718 1.62857 28.3699 1.30957 27.6331 1.30957C27.6237 1.30957 27.6143 1.31009 27.6051 1.31114C27.596 1.31009 27.5865 1.30957 27.5771 1.30957H26.5295C26.3849 1.30957 26.2676 1.4269 26.2676 1.57148C26.2676 1.71605 26.3849 1.83338 26.5295 1.83338H27.5771C27.5865 1.83338 27.596 1.83286 27.6054 1.83181C27.6146 1.83286 27.624 1.83338 27.6334 1.83338C28.2193 1.83338 28.7774 2.08743 29.1648 2.52978C29.2166 2.58898 29.2892 2.61909 29.362 2.61909C29.4233 2.61909 29.4846 2.59762 29.5341 2.55414C29.643 2.45881 29.654 2.29355 29.5587 2.18459Z" fill="#AA1E22"/>
                    <path d="M3.74428 8.64282H3.28909C2.68409 8.64282 2.17285 9.15406 2.17285 9.75906V10.2143C2.17285 10.3588 2.29018 10.4762 2.43476 10.4762C2.57933 10.4762 2.69666 10.3588 2.69666 10.2143V9.75906C2.69666 9.43797 2.96799 9.16663 3.28909 9.16663H3.74428C3.88885 9.16663 4.00619 9.0493 4.00619 8.90473C4.00619 8.76016 3.88885 8.64282 3.74428 8.64282Z" fill="#AA1E22"/>
                    <path d="M5.49489 8.95187C5.28485 8.75256 5.01351 8.64282 4.73065 8.64282C4.58608 8.64282 4.46875 8.76016 4.46875 8.90473C4.46875 9.0493 4.58608 9.16663 4.73065 9.16663C4.87863 9.16663 5.02215 9.2253 5.13477 9.33216C5.18532 9.38008 5.25027 9.40392 5.31496 9.40392C5.38411 9.40392 5.45325 9.37642 5.50485 9.3222C5.60411 9.21718 5.59992 9.05139 5.49489 8.95187Z" fill="#AA1E22"/>
                    </svg>

                </p>
                <p class="text-sm text-[#303843] pt-2">{{ auction?.livingrooms_number }}</p>
            </div>


          </div>
              <div class="w-full">
              <p class="text-[#46494A] text-justify text-base py-1 px-2 font-semibold">  وصف العقار :</p>
              <p class="text-[#818181] text-justify text-sm py-1 px-2 font-semibold">{{ auction?.description }}</p>
            </div>
          <div>
            <!-- @click="details(auction.auction_id)" -->
             <Button @click="details(auction?.auction_id)" style=" background-color: #AA1E22 !important;padding: 0px !important;margin-bottom: 2% !important;"  :label='$t("التفاصيل")' class="mt-3 w-[90%]  focus:ring-0 text-[#AA1E22]"/>
          </div>
        </div>
      <!-- test -->

     </div>
     <div>
      <Paginator v-if="allauctions.length >= 1"  v-model:first="current_page" :rows="1" :totalRecords="total_pages"
        :template="{

        default: 'FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink  JumpToPageDropdown'
    }"
        ></Paginator>
     </div>
  </div>

</div>
<Footer></Footer>
</template>
<script setup>
import { ref, reactive, onMounted, computed, watch } from 'vue';
import { useRouter } from 'vue-router';
import axios from "axios";
import Nave from '../components/Nave.vue';
import Footer from '../components/Footer.vue';
import AdvancedSearch from '@/components/AdvancedSearch.vue';

const router = useRouter();

// البيانات التفاعلية
const currentDate = ref(new Date());
const allauctions = ref([]);
const total_pages = ref(2);
const current_page = ref(0);
const active = ref('all');
const cityes = ref([]);
const neighborhoods = ref([]);
const activity = ref([]);

// فلتر البحث (يُستخدم في البحث الأساسي والمتقدم)
const filter = ref({
  city_id_filter: null,
  neighborhood_id_filter: null,
  building_name_like_filter: '',
  rental_type: null,
  entrance_type: null,
  building_number: null,
  rooms_number_equal: null,
  bathrooms_number_equal: null,
  installed_kitchen: false,
  installed_conditioner: false,
  rent_amount_lt_equal: null,
  rent_amount_gt_equal: null,
  activity_type_id: null,
  activity: '',
});

// تحديث الوقت كل ثانية
const updateTime = () => {
  currentDate.value = new Date();
};

// التنسيقات المحسوبة
const currentMinutes = computed(() => {
  return currentDate.value.toLocaleTimeString([], { minute: '2-digit', hour12: false }).split(':')[0];
});

const currentHour = computed(() => {
  const date = new Date(currentDate.value);
  date.setHours(date.getHours() + 1);
  return date.toLocaleTimeString([], { hour: '2-digit', hour12: false });
});

const currentSeconds = computed(() => {
  return currentDate.value.toLocaleTimeString([], { second: '2-digit', hour12: false }).split(':')[0];
});

const formattedDate = computed(() => {
  const year = currentDate.value.getFullYear();
  const month = String(currentDate.value.getMonth() + 1).padStart(2, '0');
  const day = String(currentDate.value.getDate()).padStart(2, '0');
  return `${year}-${month}-${day}`;
});

// التنقل لصفحة التفاصيل
const details = (id) => {
  router.push({ name: 'auction-details', params: { 'id': id } });
};

// جلب البيانات مع الفلاتر
const fetchdata = () => {
  axios.post('api/get_building_units_by_filters', {
    activity: filter.value.activity,
    auctions_filter: active.value,
    city_id_filter: filter.value.city_id_filter,
    page: current_page.value + 1,
    page_scope: 9,
    rental_type: filter.value.rental_type,
    building_name_like_filter: filter.value.building_name_like_filter,
    entrance_type: filter.value.entrance_type,
    building_number: filter.value.building_number,
    rooms_number_equal: filter.value.rooms_number_equal,
    installed_kitchen: filter.value.installed_kitchen,
    installed_conditioner: filter.value.installed_conditioner,
    bathrooms_number_equal: filter.value.bathrooms_number_equal,
    rent_amount_gt_equal: filter.value.rent_amount_gt_equal,
    rent_amount_lt_equal: filter.value.rent_amount_lt_equal,
    activity_type_id: filter.value.activity_type_id,
    neighborhood_id_filter: filter.value.neighborhood_id_filter,
    lang: localStorage.getItem('appLang'),
  }).then((res) => {
    if (res.data.result.data.length === 9) {
      total_pages.value++;
    }
    allauctions.value = res.data.result.data.data.map(event => ({
      name: event.name,
      status: event.status,
      total_area: event.total_area,
      bedrooms_number: event.bedrooms_number,
      bathrooms_number: event.bathrooms_number,
      livingrooms_number: event.livingrooms_number,
      description: event.description,
      deed_date: event.deed_date,
      area: event.location_details?.area?.name || '',
      location_url: event.location_details?.location_url || '',
      profile_img_link: event.profile_img_link || '',
    }));
  });
};

// جلب المدن
const get_cities = () => {
  axios.post('api/get_ksa_cities', {
    lang: localStorage.getItem('appLang'),
  }).then((res) => {
    cityes.value = res.data.result.data;
  });
};

// جلب الأحياء بناءً على المدينة المحددة
const get_neighborhoods = (cityId) => {
  axios.post('api/get_ksa_neighborhoods', {
    lang: localStorage.getItem('appLang'),
    city_id: cityId,
  }).then((res) => {
    neighborhoods.value = res.data.result.data;
  });
};

// جلب أنواع النشاطات
const get_activities = () => {
  axios.post('api/get_assets_activity_types', {
    lang: localStorage.getItem('appLang'),
  }).then((res) => {
    activity.value = res.data.result.data;
  });
};

// معالجة البحث المتقدم
const handleAdvancedSearch = (advancedFilters) => {
  filter.value = { ...filter.value, ...advancedFilters };
  console.log('Merged Filters:', filter.value);
  fetchdata();
};

// مراقبة تغيير الصفحة
watch(current_page, (newPage) => {
  if (allauctions.value.length >= 9) {
    fetchdata();
  }
});

// التنفيذ عند التحميل
onMounted(() => {
  updateTime();
  fetchdata();
  get_cities();
  get_activities();
  setInterval(updateTime, 1000);
});
</script>
<style>
.auction .swiper-pagination-bullet {
background-color: white;
color: red !important;
z-index: 60;
}
.auction .swiper-pagination-bullet span {

color: red !important;

}


.swiper-button-next,
.swiper-button-prev {
color: #007bff;
}
.swiper-button-prev{
background-color: red !important;
border-radius: 9% !important ;
transform: scale(.7) !important;
color:  white !important;
width: 50px !important ;
height: 50px !important ;
}
.swiper-button-next{
background-color: red !important;
border-radius: 9% !important ;
transform: scale(.7) !important;
color:  white !important;
width: 50px !important ;
height: 50px !important ;
}
.auction .swiper-pagination{
position: relative ;
margin-top: 1%
}

.p-paginator .p-paginator-pages .p-paginator-page.p-highlight{
  background-color: white !important;
  border: 1px solid #AA1E22;
  color: black;
}
.p-paginator .p-paginator-pages .p-paginator-page{
  background-color: #CCCCCC !important;
  border: 1px solid black;
  color: black !important
}
.p-paginator .p-dropdown{
  visibility: hidden !important;
}
.p-paginator .p-paginator-last ,.p-paginator .p-paginator-first{
  visibility: hidden !important;
}
.p-paginator .p-icon {
  transform: rotate(180deg) !important;
    width: 2rem;
    height: 3rem;
}
 .filter .p-inputtext:enabled{
  height: 42px !important;
 }
</style>

